(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{222:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return d}));var r=function(data){if(!data)return"";var t=new Date(data).getDate(),e=new Date(data).getMonth()+1<10?"0".concat(new Date(data).getMonth()+1):new Date(data).getMonth()+1,n=new Date(data).getFullYear();return"".concat(n,"-").concat(e,"-").concat(t)},o=function(data){if(!data)return"";var t=new Date(data).getDate()<10?"0".concat(new Date(data).getDate()):new Date(data).getDate(),e=new Date(data).getMonth()+1<10?"0".concat(new Date(data).getMonth()+1):new Date(data).getMonth()+1,n=new Date(data).getFullYear(),r=new Date(data).getHours()<10?"0".concat(new Date(data).getHours()):new Date(data).getHours(),o=new Date(data).getMinutes()<10?"0".concat(new Date(data).getMinutes()):new Date(data).getMinutes();return"".concat(n,"-").concat(e,"-").concat(t,"T").concat(r,":").concat(o,":00")},c=function(data){if(!data)return"";var t=new Date(data).getDate()<10?"0".concat(new Date(data).getDate()):new Date(data).getDate(),e=new Date(data).getMonth()+1<10?"0".concat(new Date(data).getMonth()+1):new Date(data).getMonth()+1,n=new Date(data).getFullYear(),r=new Date(data).getHours()<10?"0".concat(new Date(data).getHours()):new Date(data).getHours(),o=new Date(data).getMinutes()<10?"0".concat(new Date(data).getMinutes()):new Date(data).getMinutes();return"".concat(t,".").concat(e,".").concat(n," ").concat(r,":").concat(o)},l=function(data){if(!data)return"";var t=new Date(data).getDate()<10?"0".concat(new Date(data).getDate()):new Date(data).getDate(),e=new Date(data).getMonth()+1<10?"0".concat(new Date(data).getMonth()+1):new Date(data).getMonth()+1,n=new Date(data).getFullYear();return"".concat(t,".").concat(e,".").concat(n)},d=function(t){return["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябырь","Декабырь"][t]}},223:function(t,e,n){"use strict";var r=n(5),o=n(36),c=n(37),l=n(144),d=n(73),_=n(11),v=n(61).f,f=n(74).f,m=n(13).f,h=n(224).trim,w="Number",D=r.Number,N=D,y=D.prototype,S=c(n(92)(y))==w,I="trim"in String.prototype,O=function(t){var e=d(t,!1);if("string"==typeof e&&e.length>2){var n,r,o,c=(e=I?e.trim():h(e,3)).charCodeAt(0);if(43===c||45===c){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===c){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var code,l=e.slice(2),i=0,_=l.length;i<_;i++)if((code=l.charCodeAt(i))<48||code>o)return NaN;return parseInt(l,r)}}return+e};if(!D(" 0o1")||!D("0b1")||D("+0x1")){D=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof D&&(S?_((function(){y.valueOf.call(n)})):c(n)!=w)?l(new N(O(e)),n,D):O(e)};for(var x,M=n(14)?v(N):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),P=0;M.length>P;P++)o(N,x=M[P])&&!o(D,x)&&m(D,x,f(N,x));D.prototype=y,y.constructor=D,n(18)(r,w,D)}},224:function(t,e,n){var r=n(4),o=n(46),c=n(11),l=n(225),d="["+l+"]",_=RegExp("^"+d+d+"*"),v=RegExp(d+d+"*$"),f=function(t,e,n){var o={},d=c((function(){return!!l[t]()||"​"!="​"[t]()})),_=o[t]=d?e(m):l[t];n&&(o[n]=_),r(r.P+r.F*d,"String",o)},m=f.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(_,"")),2&e&&(t=t.replace(v,"")),t};t.exports=f},225:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},276:function(t,e,n){var content=n(316);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("20927812",content,!0,{sourceMap:!1})},315:function(t,e,n){"use strict";n(276)},316:function(t,e,n){var r=n(23)(!1);r.push([t.i,".statistic[data-v-41ea5445]{padding:20px;position:relative}.statistic__tables[data-v-41ea5445]{display:flex}.statistic__table[data-v-41ea5445]{border-spacing:0;border-collapse:collapse}.statistic__table td[data-v-41ea5445],.statistic__table th[data-v-41ea5445]{border:1px solid #000;padding:5px;text-align:center}.statistic__table td .link[data-v-41ea5445],.statistic__table th .link[data-v-41ea5445]{text-decoration:underline;cursor:pointer;border:none;background-color:initial}.statistic__table-wrapper[data-v-41ea5445]{margin-top:15px;margin-right:20px}.statistic-month__table[data-v-41ea5445]{border-spacing:0;border-collapse:collapse}.statistic-month__table td[data-v-41ea5445],.statistic-month__table th[data-v-41ea5445]{border:1px solid #000;padding:5px;text-align:center}.statistic-month__table td .link[data-v-41ea5445],.statistic-month__table th .link[data-v-41ea5445]{text-decoration:underline;cursor:pointer;border:none;background-color:initial}.statistic-month__table-wrapper[data-v-41ea5445]{margin-top:15px}",""]),t.exports=r},348:function(t,e,n){"use strict";n.r(e);n(44),n(16),n(17),n(8),n(34),n(223),n(45),n(52),n(26);var r=n(10),o=(n(25),n(2)),c=n(35),l=n(222);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={components:{},layout:"admin",asyncData:function(t){var e=t.$axios;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.get("/admin/statistic");case 3:return n=t.sent,r=n.data,o=r.statistic,c=r.solds,t.next=9,e.get("/admin/statistic/month");case 9:return l=t.sent,d=l.data.monthStatistic,t.abrupt("return",{currentPage:1,perPage:100,statistic:o,solds:c,monthStatistic:d});case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()},computed:_(_({},Object(c.b)({sellers:"codeBooks/sellers"})),{},{getOnlySeller:function(){return this.sellers.filter((function(t){return"manager"===t.role.key}))}}),methods:{getCurrentMonthName:function(t){return Object(l.e)(t)},getCurrentDate:function(t){return Object(l.d)(t)},getCountSold:function(t,e){return t.filter((function(t){return t.seller.includes(e)})).length},getSummSoldPrice:function(t,e){return t.filter((function(t){return t.seller.includes(e)})).reduce((function(t,e){return t+Number(e.totalPrice)}),0)},getSummSoldIncomePrice:function(t,e){return t.filter((function(t){return t.seller.includes(e)})).reduce((function(t,e){return t+Number(e.totalIncome)}),0)}}},f=(n(315),n(6)),component=Object(f.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"statistic"},[n("h1",[t._v("Статистика")]),t._v(" "),n("div",{staticClass:"statistic__tables"},[n("div",{staticClass:"statistic__table-wrapper"},[n("table",{staticClass:"statistic__table"},[t._m(0),t._v(" "),t._l(t.statistic,(function(e){return[n("tr",{key:e.staartDate,on:{click:function(t){e.visible=!e.visible}}},[n("td",{attrs:{colspan:"4"}},[t._v("\n              "+t._s(t.getCurrentDate(e.staartDate))+" -\n              "+t._s(t.getCurrentDate(e.endDate))+"\n            ")])]),t._v(" "),t._l(t.getOnlySeller,(function(r){return n("tr",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"el.visible"}],key:r._id+e.staartDate},[n("td",[t._v(t._s(r.name))]),t._v(" "),n("td",[t._v("\n              "+t._s(t.getCountSold(e.sold,r._id))+"\n            ")]),t._v(" "),n("td",[t._v("\n              "+t._s(t.getSummSoldPrice(e.sold,r._id))+"\n            ")]),t._v(" "),n("td",[t._v("\n              "+t._s(t.getSummSoldIncomePrice(e.sold,r._id))+"\n            ")])])})),t._v(" "),n("tr",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"el.visible"}],key:"total"+e.staartDate},[n("td",[t._v("Итог")]),t._v(" "),n("td",[t._v(t._s(e.sold.length))]),t._v(" "),n("td",[t._v("\n              "+t._s(e.sold.reduce((function(t,e){return t+Number(e.totalPrice)}),0))+"\n            ")]),t._v(" "),n("td",[t._v("\n              "+t._s(e.sold.reduce((function(t,e){return t+Number(e.totalIncome)}),0))+"\n            ")])])]})),t._v(" "),t._m(1),t._v(" "),t._l(t.getOnlySeller,(function(e){return n("tr",{key:e._id},[n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v("\n            "+t._s(t.getCountSold(t.solds,e._id))+"\n          ")]),t._v(" "),n("td",[t._v("\n            "+t._s(t.getSummSoldPrice(t.solds,e._id))+"\n          ")]),t._v(" "),n("td",[t._v("\n            "+t._s(t.getSummSoldIncomePrice(t.solds,e._id))+"\n          ")])])})),t._v(" "),n("tr",[n("td",[t._v("Итог")]),t._v(" "),n("td",[t._v(t._s(t.solds.length))]),t._v(" "),n("td",[t._v("\n            "+t._s(t.solds.reduce((function(t,e){return t+Number(e.totalPrice)}),0))+"\n          ")]),t._v(" "),n("td",[t._v("\n            "+t._s(t.solds.reduce((function(t,e){return t+Number(e.totalIncome)}),0))+"\n          ")])])],2)]),t._v(" "),n("div",{staticClass:"statistic-month__table-wrapper"},[n("table",{staticClass:"statistic-month__table"},[t._m(2),t._v(" "),t._l(t.monthStatistic,(function(e){return[n("tr",{key:e.monthId+e.year},[n("td",{attrs:{colspan:"5"}},[t._v("\n              "+t._s(t.getCurrentMonthName(e.monthId))+" "+t._s(e.year)+"\n            ")])]),t._v(" "),n("tr",{key:e.monthId+e.year},[n("td",[t._v(t._s(e.sold.length))]),t._v(" "),n("td",[t._v("\n              "+t._s(e.sold.reduce((function(t,e){return t+Number(e.totalPrice)}),0))+"\n            ")]),t._v(" "),n("td",[t._v("\n              "+t._s(e.cost.reduce((function(t,e){return t+Number(e.sum)}),0))+"\n            ")]),t._v(" "),n("td",[t._v("\n              "+t._s(e.sold.reduce((function(t,e){return t+Number(e.totalIncome)}),0))+"\n            ")]),t._v(" "),n("td",[t._v("\n              "+t._s(e.sold.reduce((function(t,e){return t+Number(e.totalIncome)}),0)-e.cost.reduce((function(t,e){return t+Number(e.sum)}),0))+"\n            ")])])]}))],2)])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",[t._v("Менеджер")]),t._v(" "),n("td",[t._v("№ продаж")]),t._v(" "),n("td",[t._v("Сумма")]),t._v(" "),n("td",[t._v("Доход")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",{attrs:{colspan:"4"}},[t._v("Итог")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",[t._v("Кол-во")]),t._v(" "),n("td",[t._v("Сумма")]),t._v(" "),n("td",[t._v("Расходы")]),t._v(" "),n("td",[t._v("Доход")]),t._v(" "),n("td",[t._v("Прибыль")])])}],!1,null,"41ea5445",null);e.default=component.exports}}]);